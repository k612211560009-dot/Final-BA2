<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="predictions.css" />
    <title>Dashboard D·ª± ƒëo√°n Downtime Nh√† m√°y</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="data.js"></script>
    <script src="script.js" defer></script>
  </head>
  <body>
    <!-- Header -->
    <div class="header">
      <div class="header-content">
        <div class="header-title">
          <h1>Dashboard Thi·∫øt B·ªã T·∫°i Nh√† M√°y</h1>
          <p>Gi√°m s√°t t√¨nh tr·∫°ng thi·∫øt b·ªã v√† d·ª± ƒëo√°n th·ªùi gian ng·ª´ng m√°y</p>
          <div style="font-size: 0.875rem; color: #10b981; margin-top: 0.25rem;">
            <span id="realtimeIndicator">üü¢</span> Real-time | <span id="lastUpdate">ƒêang c·∫≠p nh·∫≠t...</span>
          </div>
        </div>
        <div class="header-controls">
          <select
            id="timeRange"
            onchange="updateDashboardTimeRange(this.value)"
          >
            <option value="7">7 ng√†y</option>
            <option value="30">30 ng√†y</option>
            <option value="90" selected>90 ng√†y</option>
            <option value="180">180 ng√†y</option>
            <option value="365">1 nƒÉm</option>
          </select>
          <select id="areaSelect" onchange="handleAreaSelectChange(this.value)">
            <option value="overview">T·ªïng quan</option>
            <option value="pipeline">H·ªá th·ªëng Pipeline</option>
            <option value="bearing">H·ªá th·ªëng Bearing</option>
            <option value="pump">H·ªá th·ªëng Pump</option>
            <option value="turbine">H·ªá th·ªëng Turbine</option>
            <option value="compressor">H·ªá th·ªëng Compressor</option>
          </select>
          <div class="dashboard-tabs">
            <button class="tab-btn active" data-view="analytics" onclick="switchDashboardView('analytics')">
              üìä Analytics
            </button>
            <button class="tab-btn" data-view="reports" onclick="switchDashboardView('reports')">
              üìß Reports
            </button>
            <button class="tab-btn" data-view="models" onclick="switchDashboardView('models')">
              ü§ñ Models
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Overview Screen -->
    <div id="overviewScreen">
      <!-- KPIs -->
      <div class="kpi-grid">
        <div class="kpi-card blue">
          <div class="kpi-content">
            <div>
              <div class="kpi-label">T·ªïng s·ªë Thi·∫øt b·ªã</div>
              <div class="kpi-value" style="color: #1f2937" id="totalEquipment">
                121
              </div>
            </div>
            <div class="kpi-icon">üìä</div>
          </div>
        </div>
        <div class="kpi-card red">
          <div class="kpi-content">
            <div>
              <div class="kpi-label">C·∫£nh b√°o Critical</div>
              <div class="kpi-value" style="color: #dc2626" id="criticalAlerts">
                3
              </div>
            </div>
            <div class="kpi-icon">‚ö†Ô∏è</div>
          </div>
        </div>
        <div class="kpi-card orange">
          <div class="kpi-content">
            <div>
              <div class="kpi-label">Downtime D·ª± ƒëo√°n</div>
              <div
                class="kpi-value"
                style="color: #f97316"
                id="predictedDowntime"
              >
                40h
              </div>
              <div style="font-size: 0.75rem; color: #6b7280">7 ng√†y t·ªõi</div>
            </div>
            <div class="kpi-icon">‚è∞</div>
          </div>
        </div>
      </div>

      <!-- PREDICTIONS SECTION -->
      <div style="margin-bottom: 1.5rem">
        <h2
          style="
            font-size: 1.125rem;
            margin-bottom: 1rem;
            color: #1f2937;
            font-weight: 600;
          "
        >
          <span style="margin-right: 0.5rem">üîÆ</span>D·ª± ƒêo√°n Thi·∫øt B·ªã
        </h2>

        <div class="chart-container" style="padding: 1.25rem">
          <!-- Filter tabs -->
          <div
            style="
              margin-bottom: 1rem;
              display: flex;
              gap: 0.625rem;
              flex-wrap: wrap;
            "
          >
            <button
              class="pred-filter-btn active"
              data-filter="all"
              style="
                padding: 0.5rem 1rem;
                border: 2px solid #10b981;
                background: #10b981;
                color: white;
                border-radius: 0.375rem;
                cursor: pointer;
                font-weight: 500;
                font-size: 0.875rem;
                transition: all 0.2s;
              "
            >
              T·∫•t c·∫£ (121)
            </button>
            <button
              class="pred-filter-btn"
              data-filter="high-risk"
              style="
                padding: 0.5rem 1rem;
                border: 2px solid #ef4444;
                background: white;
                color: #ef4444;
                border-radius: 0.375rem;
                cursor: pointer;
                font-weight: 500;
                font-size: 0.875rem;
                transition: all 0.2s;
              "
            >
              R·ªßi ro cao
            </button>
            <button
              class="pred-filter-btn"
              data-filter="compressor"
              style="
                padding: 0.5rem 1rem;
                border: 2px solid #3b82f6;
                background: white;
                color: #3b82f6;
                border-radius: 0.375rem;
                cursor: pointer;
                font-weight: 500;
                font-size: 0.875rem;
                transition: all 0.2s;
              "
            >
              Compressor (3)
            </button>
            <button
              class="pred-filter-btn"
              data-filter="turbine"
              style="
                padding: 0.5rem 1rem;
                border: 2px solid #f59e0b;
                background: white;
                color: #f59e0b;
                border-radius: 0.375rem;
                cursor: pointer;
                font-weight: 500;
                font-size: 0.875rem;
                transition: all 0.2s;
              "
            >
              Turbine (101)
            </button>
            <button
              class="pred-filter-btn"
              data-filter="pipeline"
              style="
                padding: 0.5rem 1rem;
                border: 2px solid #8b5cf6;
                background: white;
                color: #8b5cf6;
                border-radius: 0.375rem;
                cursor: pointer;
                font-weight: 500;
                font-size: 0.875rem;
                transition: all 0.2s;
              "
            >
              Pipeline (5)
            </button>
          </div>

          <!-- Predictions table -->
          <div style="overflow-x: auto">
            <table
              id="predictionsTable"
              style="
                width: 100%;
                border-collapse: collapse;
                font-size: 0.8125rem;
              "
            >
              <thead>
                <tr style="background: #f9fafb; text-align: left">
                  <th
                    style="
                      padding: 0.75rem;
                      border-bottom: 2px solid #e5e7eb;
                      font-weight: 600;
                      color: #374151;
                    "
                  >
                    Thi·∫øt b·ªã
                  </th>
                  <th
                    style="
                      padding: 0.75rem;
                      border-bottom: 2px solid #e5e7eb;
                      font-weight: 600;
                      color: #374151;
                    "
                  >
                    Lo·∫°i
                  </th>
                  <th
                    style="
                      padding: 0.75rem;
                      border-bottom: 2px solid #e5e7eb;
                      font-weight: 600;
                      color: #374151;
                    "
                  >
                    M√¥ h√¨nh
                  </th>
                  <th
                    style="
                      padding: 0.75rem;
                      border-bottom: 2px solid #e5e7eb;
                      font-weight: 600;
                      color: #374151;
                    "
                  >
                    RUL d·ª± ƒëo√°n
                  </th>
                  <th
                    style="
                      padding: 0.75rem;
                      border-bottom: 2px solid #e5e7eb;
                      font-weight: 600;
                      color: #374151;
                    "
                  >
                    Hi·ªáu su·∫•t
                  </th>
                  <th
                    style="
                      padding: 0.75rem;
                      border-bottom: 2px solid #e5e7eb;
                      font-weight: 600;
                      color: #374151;
                    "
                  >
                    R·ªßi ro
                  </th>
                  <th
                    style="
                      padding: 0.75rem;
                      border-bottom: 2px solid #e5e7eb;
                      font-weight: 600;
                      color: #374151;
                    "
                  >
                    ƒê·ªô tin c·∫≠y
                  </th>
                </tr>
              </thead>
              <tbody id="predictionsTableBody">
                <!-- Will be populated by JavaScript -->
              </tbody>
            </table>
          </div>

          <div
            id="predictionsPagination"
            style="
              margin-top: 1rem;
              text-align: center;
              color: #6b7280;
              font-size: 0.875rem;
            "
          >
            <!-- Pagination controls -->
          </div>
        </div>
      </div>

      <!-- Charts -->
      <div
        style="
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
          gap: 1.5rem;
          margin-bottom: 1.5rem;
        "
      >
        <div class="chart-container">
          <div class="chart-title">
            üìä Ph√¢n b·ªï R·ªßi ro To√†n nh√† m√°y
            <span class="trend-indicator trend-stable" style="margin-left: 0.5rem;">‚ÜîÔ∏è ·ªîn ƒë·ªãnh</span>
          </div>
          <canvas id="riskChart"></canvas>
        </div>
        <div class="chart-container">
          <div class="chart-title">
            üó∫Ô∏è R·ªßi ro theo Khu v·ª±c
            <span class="trend-indicator trend-up" style="margin-left: 0.5rem;">‚ÜóÔ∏è +2 alerts</span>
          </div>
          <div class="area-list" id="areaList"></div>
        </div>
      </div>

      <!-- Advanced Analytics Charts -->
      <div
        style="
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
          gap: 1.5rem;
          margin-bottom: 1.5rem;
        "
      >
        <div class="chart-container">
          <div class="chart-title">
            üìà Xu h∆∞·ªõng RUL theo Th·ªùi gian
            <span class="trend-indicator trend-down" style="margin-left: 0.5rem;">‚ÜòÔ∏è -5h avg</span>
          </div>
          <canvas id="rulTimeSeriesChart"></canvas>
        </div>
        <div class="chart-container">
          <div class="chart-title">
            üîß Hi·ªáu su·∫•t Thi·∫øt b·ªã theo Lo·∫°i
            <span class="trend-indicator trend-up" style="margin-left: 0.5rem;">‚ÜóÔ∏è +2.3%</span>
          </div>
          <canvas id="efficiencyByTypeChart"></canvas>
        </div>
      </div>

      <div
        style="
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
          gap: 1.5rem;
          margin-bottom: 1.5rem;
        "
      >
        <div class="chart-container">
          <div class="chart-title">
            ‚ö†Ô∏è C·∫£nh b√°o theo Tu·∫ßn
            <span class="trend-indicator trend-down" style="margin-left: 0.5rem;">‚ÜòÔ∏è -3 t·ª´ tu·∫ßn tr∆∞·ªõc</span>
          </div>
          <canvas id="alertsTimelineChart"></canvas>
        </div>
        <div class="chart-container">
          <div class="chart-title">
            üéØ ƒê·ªô tin c·∫≠y D·ª± ƒëo√°n
            <span class="trend-indicator trend-up" style="margin-left: 0.5rem;">‚ÜóÔ∏è 87% avg</span>
          </div>
          <canvas id="confidenceDistributionChart"></canvas>
        </div>
      </div>

      <!-- Dashboard Views Container -->
      <div id="dashboardViewsContainer">
        
        <!-- Reports View (Hidden by default) -->
        <div id="reportsView" class="dashboard-view hidden">
          <div class="chart-container" style="margin-bottom: 1.5rem">
            <div class="chart-title">üìß G·ª≠i B√°o c√°o Dashboard theo Thi·∫øt b·ªã</div>
            <div style="padding: 1rem">
              <div
                style="
                  display: grid;
                  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                  gap: 1rem;
                  margin-bottom: 1rem;
                "
              >
                <div
                  class="department-card"
                  onclick="toggleEquipmentSelection('pipeline')"
                >
                  <div style="display: flex; align-items: center; gap: 0.5rem">
                    <input
                      type="checkbox"
                      id="equip-pipeline"
                      class="dept-checkbox"
                    />
                    <label style="flex: 1; cursor: pointer; font-weight: 500"
                      >üîß Pipeline</label
                    >
                  </div>
                  <div
                    style="font-size: 0.75rem; color: #6b7280; margin-top: 0.25rem"
                  >
                    5 units - Corrosion analysis
                  </div>
                </div>
                <div
                  class="department-card"
                  onclick="toggleEquipmentSelection('bearing')"
                >
                  <div style="display: flex; align-items: center; gap: 0.5rem">
                    <input
                      type="checkbox"
                      id="equip-bearing"
                      class="dept-checkbox"
                    />
                    <label style="flex: 1; cursor: pointer; font-weight: 500"
                      >‚öôÔ∏è Bearing</label
                    >
                  </div>
                  <div
                    style="font-size: 0.75rem; color: #6b7280; margin-top: 0.25rem"
                  >
                    10 units - Vibration monitoring
                  </div>
                </div>
                <div
                  class="department-card"
                  onclick="toggleEquipmentSelection('pump')"
                >
                  <div style="display: flex; align-items: center; gap: 0.5rem">
                    <input
                      type="checkbox"
                      id="equip-pump"
                      class="dept-checkbox"
                    />
                    <label style="flex: 1; cursor: pointer; font-weight: 500"
                      >üíß Pump</label
                    >
                  </div>
                  <div
                    style="font-size: 0.75rem; color: #6b7280; margin-top: 0.25rem"
                  >
                    34 units - Performance tracking
                  </div>
                </div>
                <div
                  class="department-card"
                  onclick="toggleEquipmentSelection('turbine')"
                >
                  <div style="display: flex; align-items: center; gap: 0.5rem">
                    <input
                      type="checkbox"
                      id="equip-turbine"
                      class="dept-checkbox"
                    />
                    <label style="flex: 1; cursor: pointer; font-weight: 500"
                      >üå™Ô∏è Turbine</label
                    >
                  </div>
                  <div
                    style="font-size: 0.75rem; color: #6b7280; margin-top: 0.25rem"
                  >
                    21 units - Efficiency analysis
                  </div>
                </div>
                <div
                  class="department-card"
                  onclick="toggleEquipmentSelection('compressor')"
                >
                  <div style="display: flex; align-items: center; gap: 0.5rem">
                    <input
                      type="checkbox"
                      id="equip-compressor"
                      class="dept-checkbox"
                    />
                    <label style="flex: 1; cursor: pointer; font-weight: 500"
                      >üè≠ Compressor</label
                    >
                  </div>
                  <div
                    style="font-size: 0.75rem; color: #6b7280; margin-top: 0.25rem"
                  >
                    51 units - RUL prediction
                  </div>
                </div>
              </div>

              <div
                style="
                  display: flex;
                  gap: 0.75rem;
                  align-items: center;
                  flex-wrap: wrap;
                "
              >
                <button
                  class="btn-send-report"
                  onclick="sendReportToDepartments()"
                  style="flex: 1; min-width: 200px"
                >
                  üì§ G·ª≠i B√°o c√°o
                </button>
                <button
                  class="btn-schedule-report"
                  onclick="scheduleReport()"
                  style="flex: 1; min-width: 200px"
                >
                  ‚è∞ L√™n L·ªãch G·ª≠i
                </button>
                <select
                  id="reportFrequency"
                  style="
                    padding: 0.5rem;
                    border: 1px solid #d1d5db;
                    border-radius: 0.375rem;
                    min-width: 150px;
                  "
                >
                  <option value="daily">H√†ng ng√†y</option>
                  <option value="weekly">H√†ng tu·∫ßn</option>
                  <option value="monthly">H√†ng th√°ng</option>
                </select>
              </div>

              <div
                id="reportStatusPanel"
                style="
                  margin-top: 1rem;
                  padding: 1rem;
                  background: #f9fafb;
                  border-radius: 0.375rem;
                  display: none;
                "
              >
                <div id="reportStatusContent"></div>
              </div>
            </div>
          </div>
        </div>

        <!-- Models View (Hidden by default) -->
        <div id="modelsView" class="dashboard-view hidden">
          <div class="chart-container" style="margin-bottom: 1.5rem">
            <div class="chart-title">ü§ñ Model Performance Summary</div>
            <div style="padding: 1rem">
              <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem; margin-bottom: 1.5rem;">
                <div class="model-card">
                  <div class="model-header">
                    <span style="font-size: 1.5rem;">üîß</span>
                    <div>
                      <div style="font-weight: 600;">Pipeline Model</div>
                      <div style="font-size: 0.75rem; color: #6b7280;">LSTM + Attention</div>
                    </div>
                  </div>
                  <div class="model-metrics">
                    <div class="metric-item">
                      <span class="metric-label">Accuracy</span>
                      <span class="metric-value">94.2%</span>
                    </div>
                    <div class="metric-item">
                      <span class="metric-label">MAE</span>
                      <span class="metric-value">2.3 days</span>
                    </div>
                    <div class="metric-item">
                      <span class="metric-label">Samples</span>
                      <span class="metric-value">5 units</span>
                    </div>
                  </div>
                </div>

                <div class="model-card">
                  <div class="model-header">
                    <span style="font-size: 1.5rem;">‚öôÔ∏è</span>
                    <div>
                      <div style="font-weight: 600;">Bearing Model</div>
                      <div style="font-size: 0.75rem; color: #6b7280;">CNN-LSTM Hybrid</div>
                    </div>
                  </div>
                  <div class="model-metrics">
                    <div class="metric-item">
                      <span class="metric-label">Accuracy</span>
                      <span class="metric-value">96.8%</span>
                    </div>
                    <div class="metric-item">
                      <span class="metric-label">MAE</span>
                      <span class="metric-value">1.8 days</span>
                    </div>
                    <div class="metric-item">
                      <span class="metric-label">Samples</span>
                      <span class="metric-value">10 units</span>
                    </div>
                  </div>
                </div>

                <div class="model-card">
                  <div class="model-header">
                    <span style="font-size: 1.5rem;">üíß</span>
                    <div>
                      <div style="font-weight: 600;">Pump Model</div>
                      <div style="font-size: 0.75rem; color: #6b7280;">Random Forest</div>
                    </div>
                  </div>
                  <div class="model-metrics">
                    <div class="metric-item">
                      <span class="metric-label">Accuracy</span>
                      <span class="metric-value">92.5%</span>
                    </div>
                    <div class="metric-item">
                      <span class="metric-label">MAE</span>
                      <span class="metric-value">3.1 days</span>
                    </div>
                    <div class="metric-item">
                      <span class="metric-label">Samples</span>
                      <span class="metric-value">3 units</span>
                    </div>
                  </div>
                </div>

                <div class="model-card">
                  <div class="model-header">
                    <span style="font-size: 1.5rem;">üåÄ</span>
                    <div>
                      <div style="font-weight: 600;">Turbine Model</div>
                      <div style="font-size: 0.75rem; color: #6b7280;">Deep LSTM</div>
                    </div>
                  </div>
                  <div class="model-metrics">
                    <div class="metric-item">
                      <span class="metric-label">Accuracy</span>
                      <span class="metric-value">95.7%</span>
                    </div>
                    <div class="metric-item">
                      <span class="metric-label">MAE</span>
                      <span class="metric-value">2.0 days</span>
                    </div>
                    <div class="metric-item">
                      <span class="metric-label">Samples</span>
                      <span class="metric-value">101 units</span>
                    </div>
                  </div>
                </div>

                <div class="model-card">
                  <div class="model-header">
                    <span style="font-size: 1.5rem;">üîÑ</span>
                    <div>
                      <div style="font-weight: 600;">Compressor Model</div>
                      <div style="font-size: 0.75rem; color: #6b7280;">XGBoost</div>
                    </div>
                  </div>
                  <div class="model-metrics">
                    <div class="metric-item">
                      <span class="metric-label">Accuracy</span>
                      <span class="metric-value">93.4%</span>
                    </div>
                    <div class="metric-item">
                      <span class="metric-label">MAE</span>
                      <span class="metric-value">2.7 days</span>
                    </div>
                    <div class="metric-item">
                      <span class="metric-label">Samples</span>
                      <span class="metric-value">2 units</span>
                    </div>
                  </div>
                </div>
              </div>

              <div style="background: #eff6ff; border-left: 4px solid #3b82f6; padding: 1rem; border-radius: 0.375rem;">
                <div style="font-weight: 600; margin-bottom: 0.5rem;">üìÅ Model Storage Structure</div>
                <div style="font-size: 0.875rem; color: #374151; line-height: 1.6;">
                  Models are stored in: <code>d:/Final BA2/models/saved_models/</code><br/>
                  Structure: <code>[equipment_type]/model_[version].pkl</code><br/>
                  ‚Ä¢ Pipeline: Thickness loss prediction models<br/>
                  ‚Ä¢ Bearing/Turbine: Vibration-based RUL models (CMaps dataset)<br/>
                  ‚Ä¢ Compressor/Pump: Multi-sensor anomaly detection<br/><br/>
                  üìä Predictions generated from models are displayed in dashboard charts and tables above.
                </div>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>
          <div
            style="
              display: grid;
              grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
              gap: 1rem;
              margin-bottom: 1rem;
            "
          >
            <div
              class="department-card"
              onclick="toggleDepartmentSelection('production')"
            >
              <div style="display: flex; align-items: center; gap: 0.5rem">
                <input
                  type="checkbox"
                  id="dept-production"
                  class="dept-checkbox"
                />
                <label style="flex: 1; cursor: pointer; font-weight: 500"
                  >üè≠ S·∫£n xu·∫•t</label
                >
              </div>
              <div
                style="font-size: 0.75rem; color: #6b7280; margin-top: 0.25rem"
              >
                Tr·∫°ng th√°i thi·∫øt b·ªã & RUL
              </div>
            </div>
            <div
              class="department-card"
              onclick="toggleDepartmentSelection('maintenance')"
            >
              <div style="display: flex; align-items: center; gap: 0.5rem">
                <input
                  type="checkbox"
                  id="dept-maintenance"
                  class="dept-checkbox"
                />
                <label style="flex: 1; cursor: pointer; font-weight: 500"
                  >üîß B·∫£o tr√¨</label
                >
              </div>
              <div
                style="font-size: 0.75rem; color: #6b7280; margin-top: 0.25rem"
              >
                K·∫ø ho·∫°ch b·∫£o tr√¨ d·ª± ph√≤ng
              </div>
            </div>
            <div
              class="department-card"
              onclick="toggleDepartmentSelection('quality')"
            >
              <div style="display: flex; align-items: center; gap: 0.5rem">
                <input
                  type="checkbox"
                  id="dept-quality"
                  class="dept-checkbox"
                />
                <label style="flex: 1; cursor: pointer; font-weight: 500"
                  >‚úÖ Ki·ªÉm ƒë·ªãnh</label
                >
              </div>
              <div
                style="font-size: 0.75rem; color: #6b7280; margin-top: 0.25rem"
              >
                Ch·ªâ s·ªë ch·∫•t l∆∞·ª£ng & anomaly
              </div>
            </div>
            <div
              class="department-card"
              onclick="toggleDepartmentSelection('logistics')"
            >
              <div style="display: flex; align-items: center; gap: 0.5rem">
                <input
                  type="checkbox"
                  id="dept-logistics"
                  class="dept-checkbox"
                />
                <label style="flex: 1; cursor: pointer; font-weight: 500"
                  >üöõ V·∫≠n h√†nh</label
                >
              </div>
              <div
                style="font-size: 0.75rem; color: #6b7280; margin-top: 0.25rem"
              >
                L·ªãch downtime & d·ª± tr·ªØ
              </div>
            </div>
            <div
              class="department-card"
              onclick="toggleDepartmentSelection('management')"
            >
              <div style="display: flex; align-items: center; gap: 0.5rem">
                <input
                  type="checkbox"
                  id="dept-management"
                  class="dept-checkbox"
                />
                <label style="flex: 1; cursor: pointer; font-weight: 500"
                  >üíº Ban Gi√°m ƒë·ªëc</label
                >
              </div>
              <div
                style="font-size: 0.75rem; color: #6b7280; margin-top: 0.25rem"
              >
                T√≥m t·∫Øt t·ªïng quan & KPI
              </div>
            </div>
            <div
              class="department-card"
              onclick="toggleDepartmentSelection('finance')"
            >
              <div style="display: flex; align-items: center; gap: 0.5rem">
                <input
                  type="checkbox"
                  id="dept-finance"
                  class="dept-checkbox"
                />
                <label style="flex: 1; cursor: pointer; font-weight: 500"
                  >üí∞ T√†i ch√≠nh</label
                >
              </div>
              <div
                style="font-size: 0.75rem; color: #6b7280; margin-top: 0.25rem"
              >
                Chi ph√≠ downtime & ROI
              </div>
            </div>
          </div>

          <div
            id="reportStatusPanel"
            style="
              margin-top: 1rem;
              padding: 1rem;
              background: #f9fafb;
              border-radius: 0.375rem;
              display: none;
            "
          >
            <div id="reportStatusContent"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Detail Screen -->
    <div id="detailScreen" class="hidden">
      <!-- Detail KPIs -->
      <div class="kpi-grid">
        <div class="kpi-card blue">
          <div class="kpi-content">
            <div>
              <div class="kpi-label">RUL Trung b√¨nh</div>
              <div class="kpi-value" style="color: #2563eb" id="detailRUL">
                45h
              </div>
              <div class="progress-bar">
                <div
                  class="progress-fill"
                  id="rulProgress"
                  style="width: 45%"
                ></div>
              </div>
            </div>
            <div class="kpi-icon">üìâ</div>
          </div>
        </div>
        <div class="kpi-card orange">
          <div class="kpi-content">
            <div>
              <div class="kpi-label">Downtime D·ª± ƒëo√°n</div>
              <div class="kpi-value" style="color: #f97316" id="detailDowntime">
                12h
              </div>
              <div style="font-size: 0.75rem; color: #6b7280">7 ng√†y t·ªõi</div>
            </div>
            <div class="kpi-icon">‚è∞</div>
          </div>
        </div>
      </div>

      <!-- RUL Trend -->
      <div class="chart-container">
        <div class="chart-title">Xu h∆∞·ªõng RUL vs Ng∆∞·ª°ng B·∫£o tr√¨</div>
        <canvas id="rulTrendChart"></canvas>
      </div>

      <!-- Alerts -->
      <div class="alert-frame">
        <div class="alert-header">üîî C·∫£nh b√°o & Th√¥ng b√°o</div>
        <div class="alert-list" id="alertList"></div>
      </div>
    </div>

    <!-- Notification Panel -->
    <div class="notification-panel" id="notificationPanel">
      <div class="notification-header">üîî L·ªãch s·ª≠ Th√¥ng b√°o</div>
      <div id="notificationList"></div>
    </div>
  </body>
</html>
